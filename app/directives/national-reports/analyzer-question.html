<div style="margin-bottom:10px;">
    <b>Question {{::question.number||11}}</b> <a href="#" ng-click="showSumTypeSelector()" title="Change how numbers are calculated...">∑</a>
    <div>{{::question.title}}</div>
    <table style="width:100%">
        <tr>
            <th>&nbsp;</th>
            <th class="bchCellWorld"></th>
            <th class="bchCellWorld text-center">
                <span>All</span>
            </th>
            <th class="bchCellWorld bchCellWorldSpacer">
            </th>
            <th class="bchCellRegion text-nowrap text-center" ng-repeat-start="region in ::regions track by region.identifier" title="{{::(region.title|lstring)}}">
                <span ng-bind-html="::region.htmlTitle" ng-click="region.expanded=!region.expanded"></span>
                <i class="fa" ng-class="{ 'fa-caret-left': region.expanded , 'fa-caret-right': !region.expanded }" ng-click="region.expanded=!region.expanded"></i>
            </th>
                <!-- show countries if region.expanded -->
                <th class="bchCellCountry" ng-if="region.expanded" ng-repeat="gov in ::region.countries track by gov">
                    <a href="/database/record.shtml?documentid={{::reportsMap[gov].documentId}}" target="_report" title="{{::region.countriesMap[gov].title|lstring}}">{{::(gov|uppercase)}}</a>
                </th>
            <th class="bchCellRegion" ng-repeat-end ng-if="::false"></th>
            <th></th>
        </tr>

        <!-- OPTIONS + TERMS -->
        <tr ng-if="::question.type!='text'" ng-repeat="option in ::question.options track by option.value" ng-class="{ 'filter-on': option.filterOn, 'filter': filter }">
            <td width="22px">
                <i style="font-size:14px;cursor:pointer" class="fa fa-filter"  ng-click="toggleFilter(option)"></i>
		    </td>
            <td class="bchCellAnswer">{{::option.title}}</td>
            <td class="bchCellWorld" ng-style="::{ 'background-color': option.htmlColor }">{{::option.sum}}</td>
            <td class="bchCellWorld bchCellWorldSpacer" ng-style="::{ 'background-color': option.htmlColor }">({{::option.percent}})</td>
            <td class="bchCellGroup" ng-repeat-start="region in ::regions track by region.identifier" ng-style="{ 'background-color': option.regions[region.identifier].htmlColor }">
                {{option.regions[region.identifier][sumType]}}
            </td>
                <!-- show countries if sumType=!'sum' -->
                <td class="bchCellBullet" ng-if="region.expanded" ng-repeat="gov in ::region.countries track by gov">
                    <div ng-if="::(reportsMap[gov][question.key]==option.value || reportsMap[gov][question.key].indexOf(option.value)>=0)">●</div>
                </td>
            <td class="bchCellGroup" ng-repeat-end ng-if="::false"></th>
            <td></td>
        </tr>

        <!-- FREE TEXT -->
        <tr ng-if="::question.type=='text'">
            <td width="22px">
        		&nbsp;
		    </td>
            <td class="bchCellAnswer">Free text</td>
            <td class="bchCellWorld bchCellWorldSpacer">
                {{question.options[0].sum}}
            </td>
            <td class="bchCellWorld bchCellWorldSpacer">
                <img ng-if="::question.options[0].sum" src="/bch/images/nr-documents.png" ng-click="showTexts()" style="cursor:pointer">
            </td>
            <td class="bchCellGroup text-nowrap" ng-repeat-start="region in ::regions track by region.identifier">
                {{question.options[0].regions[region.identifier].sum}}
                <img ng-if="::question.options[0].regions[region.identifier].sum"  ng-click="showTexts(region.countries)" src="/bch/images/nr-documents.png" style="cursor:pointer">
            </td>
                <!-- show countries if region.expanded -->
                <td class="bchCellBullet" ng-if="region.expanded" ng-repeat="gov in ::region.countries track by gov">
                    <img ng-if="::reportsMap[gov][question.key]" src="/bch/images/nr-document.png" ng-click="showTexts([gov])" style="cursor:pointer">
                </td>
            <td class="bchCellGroup" ng-repeat-end ng-if="::false"></th>
            <td></td>
        </tr>

    </table>
</div>
